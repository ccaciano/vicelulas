¼
oC:\Users\lcontesini\Documents\GitHub\vicelulas\Back-end\Vicelulas\Vicelulas.Api\Controllers\ValuesController.cs
	namespace 	
	Vicelulas
 
. 
Api 
. 
Controllers #
{ 
[		 
Route		 

(		
 
$str		 
)		 
]		 
[

 
ApiController

 
]

 
public 

class 
ValuesController !
:" #
ControllerBase$ 2
{ 
[ 	
HttpGet	 
] 
public 
ActionResult 
< 
IEnumerable '
<' (
string( .
>. /
>/ 0
Get1 4
(4 5
)5 6
{ 	
return 
new 
string 
[ 
] 
{  !
$str" *
,* +
$str, 4
}5 6
;6 7
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
ActionResult 
< 
string "
>" #
Get$ '
(' (
int( +
id, .
). /
{ 	
return 
$str 
; 
} 	
[ 	
HttpPost	 
] 
public 
void 
Post 
( 
[ 
FromBody "
]" #
string$ *
value+ 0
)0 1
{ 	
} 	
["" 	
HttpPut""	 
("" 
$str"" 
)"" 
]"" 
public## 
void## 
Put## 
(## 
int## 
id## 
,## 
[##  !
FromBody##! )
]##) *
string##+ 1
value##2 7
)##7 8
{$$ 	
}%% 	
[(( 	

HttpDelete((	 
((( 
$str(( 
)(( 
](( 
public)) 
void)) 
Delete)) 
()) 
int)) 
id)) !
)))! "
{** 	
}++ 	
},, 
}-- á
eC:\Users\lcontesini\Documents\GitHub\vicelulas\Back-end\Vicelulas\Vicelulas.Api\Filtros\ErroFiltro.cs
	namespace 	
Fatec
 
. 
Clinica 
. 
Api 
. 
Filtros #
{		 
public

 

class

 

ErroFiltro

 
{ 
public 
async 
Task 
Invoke  
(  !
HttpContext! ,
context- 4
,4 5
Func6 :
<: ;
Task; ?
>? @
nextA E
)E F
{ 	
try 
{ 
await 
next 
( 
) 
; 
} 
catch 
( 
	Exception 
ex 
)  
{ 
await  
HandleExceptionAsync *
(* +
context+ 2
,2 3
ex4 6
)6 7
;7 8
} 
} 	
private 
static 
Task  
HandleExceptionAsync 0
(0 1
HttpContext1 <
context= D
,D E
	ExceptionF O
	exceptionP Y
)Y Z
{ 	
HttpStatusCode 
code 
;  
switch 
( 
	exception 
) 
{ 
case "
NaoEncontradoException +
nfEx, 0
:0 1
code 
= 
HttpStatusCode )
.) *
NotFound* 2
;2 3
break   
;   
case!! 
ConflitoException!! &
nfEx!!' +
:!!+ ,
code"" 
="" 
HttpStatusCode"" )
."") *
Conflict""* 2
;""2 3
break## 
;## 
case$$ 
RecusadoException$$ &
nfEx$$' +
:$$+ ,
code%% 
=%% 
HttpStatusCode%% )
.%%) *
	Forbidden%%* 3
;%%3 4
break&& 
;&& 
default'' 
:'' 
code(( 
=(( 
HttpStatusCode(( )
.(() *
InternalServerError((* =
;((= >
break)) 
;)) 
}** 
var,, 
result,, 
=,, 
JsonConvert,, $
.,,$ %
SerializeObject,,% 4
(,,4 5
new,,5 8
{,,9 :
error,,; @
=,,A B
	exception,,C L
.,,L M
Message,,M T
,,,T U
inner,,V [
=,,\ ]
	exception,,^ g
.,,g h
InnerException,,h v
},,w x
),,x y
;,,y z
context-- 
.-- 
Response-- 
.-- 
ContentType-- (
=--) *
$str--+ =
;--= >
context.. 
... 
Response.. 
... 

StatusCode.. '
=..( )
(..* +
int..+ .
)... /
code../ 3
;..3 4
return// 
context// 
.// 
Response// #
.//# $

WriteAsync//$ .
(//. /
result/// 5
)//5 6
;//6 7
}00 	
}11 
}22 ø
ZC:\Users\lcontesini\Documents\GitHub\vicelulas\Back-end\Vicelulas\Vicelulas.Api\Program.cs
	namespace 	
	Vicelulas
 
. 
Api 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
=>/ 1
BuildWebHost 
( 
args 
) 
. 
Run "
(" #
)# $
;$ %
public 
static 
IWebHost 
BuildWebHost +
(+ ,
string, 2
[2 3
]3 4
args5 9
)9 :
=>; =
WebHost 
.  
CreateDefaultBuilder (
(( )
args) -
)- .
. 

UseStartup 
< 
Startup #
># $
($ %
)% &
. 
Build 
( 
) 
; 
} 
} ´
ZC:\Users\lcontesini\Documents\GitHub\vicelulas\Back-end\Vicelulas\Vicelulas.Api\Startup.cs
	namespace 	
	Vicelulas
 
. 
Api 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddMvc 
( 
) 
. #
SetCompatibilityVersion 5
(5 6 
CompatibilityVersion6 J
.J K
Version_2_1K V
)V W
;W X
services 
. 
AddCors 
( 
) 
; 
services 
. 
AddSwaggerGen "
(" #
c# $
=>% '
{   
c!! 
.!! 

SwaggerDoc!! 
(!! 
$str!! !
,!!! "
new"" 
Info"" 
{## 
Title$$ 
=$$ 
$str$$  +
,$$+ ,
Version%% 
=%%  !
$str%%" &
,%%& '
Description&& #
=&&$ %
$str&&& G
,&&G H
Contact'' 
=''  !
new''" %
Contact''& -
{(( 
Name))  
=))! "
$str))# +
,))+ ,
Url** 
=**  !
$str**" <
}++ 
},, 
),, 
;,, 
var00 
xmlFile00 
=00 
$"00  
{00  !
Assembly00! )
.00) * 
GetExecutingAssembly00* >
(00> ?
)00? @
.00@ A
GetName00A H
(00H I
)00I J
.00J K
Name00K O
}00O P
.xml00P T
"00T U
;00U V
var11 
xmlPath11 
=11 
Path11 "
.11" #
Combine11# *
(11* +

AppContext11+ 5
.115 6
BaseDirectory116 C
,11C D
xmlFile11E L
)11L M
;11M N
c22 
.22 
IncludeXmlComments22 $
(22$ %
xmlPath22% ,
)22, -
;22- .
}44 
)44 
;44 
}77 	
public:: 
void:: 
	Configure:: 
(:: 
IApplicationBuilder:: 1
app::2 5
,::5 6
IHostingEnvironment::7 J
env::K N
)::N O
{;; 	
if<< 
(<< 
env<< 
.<< 
IsDevelopment<< !
(<<! "
)<<" #
)<<# $
{== 
app>> 
.>> %
UseDeveloperExceptionPage>> -
(>>- .
)>>. /
;>>/ 0
}?? 
else@@ 
{AA 
appBB 
.BB 
UseHstsBB 
(BB 
)BB 
;BB 
}CC 
appEE 
.EE 
UseHttpsRedirectionEE #
(EE# $
)EE$ %
;EE% &
appFF 
.FF 
UseMvcFF 
(FF 
)FF 
;FF 
appII 
.II 

UseSwaggerII 
(II 
)II 
;II 
appJJ 
.JJ 
UseSwaggerUIJJ 
(JJ 
cJJ 
=>JJ !
{KK 
cLL 
.LL 
SwaggerEndpointLL !
(LL! "
$strLL" <
,LL< =
$strLL> P
)LLP Q
;LLQ R
}MM 
)MM 
;MM 
}OO 	
}PP 
}QQ 